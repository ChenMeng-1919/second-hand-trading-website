var Login = function() {
    var e = function() {
            $(".login-form").validate({
                errorElement: "span",
                errorClass: "help-block",
                focusInvalid: !1,
                rules: {
                    phone: {
                        required: !0
                    },
                    password: {
                        required: !0
                    },
                    remember: {
                        required: !1
                    }
                },
                messages: {
                    phone: {
                        required: "手机号码是必填项"
                    },
                    password: {
                        required: "密码是必填项"
                    }
                },
                invalidHandler: function(e, r) {
                    $(".alert-danger", $(".login-form")).show()
                },
                highlight: function(e) {
                    $(e).closest(".form-group").addClass("has-error")
                },
                success: function(e) {
                    e.closest(".form-group").removeClass("has-error"),
                        e.remove()
                },
                errorPlacement: function(e, r) {
                    e.insertAfter(r.closest(".input-icon"))
                },
                submitHandler: function(e) {
                    e.submit()
                }
            }),
                $(".login-form input"). (function(e) {
                    if (13 == e.which) return $(".login-form").validate().form() && $(".login-form").submit(),
                        !1
                })
        },
        r = function() {
            $(".forget-form").validate({
                errorElement: "span",
                errorClass: "help-block",
                focusInvalid: !1,
                ignore: "",
                rules: {
                    email: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    email: {
                        required: "Email is required."
                    }
                },
                invalidHandler: function(e, r) {},
                highlight: function(e) {
                    $(e).closest(".form-group").addClass("has-error")
                },
                success: function(e) {
                    e.closest(".form-group").removeClass("has-error"),
                        e.remove()
                },
                errorPlacement: function(e, r) {
                    e.insertAfter(r.closest(".input-icon"))
                },
                submitHandler: function(e) {
                    e.submit()
                }
            }),
                $(".forget-form input").keypress(function(e) {
                    if (13 == e.which) return $(".forget-form").validate().form() && $(".forget-form").submit(),
                        !1
                }),
                jQuery("#forget-password").click(function() {
                    jQuery(".login-form").hide(),
                        jQuery(".forget-form").show()
                }),
                jQuery("#back-btn").click(function() {
                    jQuery(".login-form").show(),
                        jQuery(".forget-form").hide()
                })
        },
        s = function() {
                jQuery.validator.addMethod("isMobile", function(value, element) {
                    var length = value.length;
                    var mobile = /^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;
                    return this.optional(element) || (length == 11 && mobile.test(value));
                }),
                $(".register-form").validate({
                    errorElement: "span",
                    errorClass: "help-block",
                    focusInvalid: !1,
                    ignore: "",
                    rules: {
                        realname: {
                            required: !0

                        },
                        phone: {
                            required: !0,
                            isMobile: !0
                        },
                        username: {
                            required: !0
                        },
                        password: {
                            required: !0
                        },
                        rpassword: {
                            equalTo: "#register_password"
                        },
                        tnc: {
                            required: !0
                        }
                    },
                    messages: {
                        realname: {
                            required: "姓名是必填项"
                        },
                        phone: {
                            required: "手机号码是必填项",
                            isMobile: "手机号码格式错误"
                        },
                        username: {
                            required: "用户名是必填项"
                        },
                        password: {
                            required: "密码是必填项"
                        },
                        tnc: {
                            required: "请先接受服务条款和隐私政策"
                        }
                    },
                    invalidHandler: function(e, r) {},
                    highlight: function(e) {
                        $(e).closest(".form-group").addClass("has-error")
                    },
                    success: function(e) {
                        e.closest(".form-group").removeClass("has-error"),
                            e.remove()
                    },
                    errorPlacement: function(e, r) {
                        "tnc" == r.attr("name") ? e.insertAfter($("#register_tnc_error")) : 1 === r.closest(".input-icon").size() ? e.insertAfter(r.closest(".input-icon")) : e.insertAfter(r)
                    },
                    submitHandler: function(e) {
                        e.submit()
                    }
                }),
                $(".register-form input").keypress(function(e) {
                    if (13 == e.which) return $(".register-form").validate().form() && $(".register-form").submit(),
                        !1
                })
        };
    return {
        init: function() {
            e(),
                r(),
                s(),
                $.backstretch(["assets/metronic/pages/media/bg/1.jpg", "assets/metronic/pages/media/bg/2.jpg", "assets/metronic/pages/media/bg/3.jpg", "assets/metronic/pages/media/bg/4.jpg"], {
                    fade: 1e3,
                    duration: 8e3
                })
        }
    }
} ();
jQuery(document).ready(function() {
    Login.init()
});