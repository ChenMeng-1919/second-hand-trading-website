<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="common/admin-head"/>
<head>
    <title>闲闲二手交易网站后台 | 商品管理</title>
    <meta content="Preview page of Metronic Admin Theme #1 for editable datatable samples" name="description" />
    <link href="/assets/metronic/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/metronic/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/assets/metronic/global/plugins/icheck/skins/all.css" rel="stylesheet" type="text/css" />
    <head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<div class="page-wrapper">
    <!-- 导航栏 -->
    <div class="page-header navbar navbar-fixed-top">
        <div class="page-header-inner ">
            <div class="page-logo">
                <a href="javascript:location.reload()" style="margin-top: 14px;margin-left: 10px">
                    <span style="font-size: 20px;">XX-Transaction</span>
                </a>
                <div class="menu-toggler sidebar-toggler" style="position: relative;bottom: -15px">
                    <span></span>
                </div>
            </div>
            <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
                <span></span>
            </a>
        </div>
    </div>
    <!-- 功能列表 -->
    <div class="page-container">
        <div th:replace="common/admin-menu"/>
        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <div class="page-bar">
                    <ul class="page-breadcrumb">
                        <li>
                            <a href="/admin/home">主页</a>
                            <i class="fa fa-circle"></i>
                        </li>
                        <li>
                            <span>用户管理</span>
                        </li>
                    </ul>
                </div>
                <!-- BEGIN PAGE BASE CONTENT -->
                <div class="row">
                    <div class="portlet light bordered">
                        <div class="portlet-title">
                            <div class="caption font-dark">
                                <i class="icon-settings font-dark"></i>
                                <span class="caption-subject bold uppercase">商品表</span>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="table-toolbar">
                                <div class="col-md-1" >
                                    <div class="btn-group" style="padding-left: 24px">
                                        <button class="btn btn-danger" onclick="delSelected()"> 删除选中
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <table class="table table-striped table-bordered table-hover table-checkable order-column" id="dataTable111">
                                <thead>
                                <tr>
                                    <th><input type="checkbox" name="firstBox" id="firstBox" class="icheckbox_minimal-grey"/></th>
                                    <th> 商品编号 </th>
                                    <th> 名称 </th>
                                    <th> 分类 </th>
                                    <th> 现价 </th>
                                    <th> 原价 </th>
                                    <th> 详情 </th>
                                    <th> 数量 </th>
                                    <th> 图片1 </th>
                                    <th> 图片2 </th>
                                    <th> 图片3 </th>
                                    <th> 图片4 </th>
                                    <th> 图片5 </th>
                                    <th> 上架时间 </th>
                                    <th> 更新时间 </th>
                                    <th> 精选/白菜 </th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- END PAGE BASE CONTENT -->
            </div>
            <!-- END CONTENT BODY -->
        </div>
        <!-- END CONTENT -->
    </div>
    </div>
</div>
</div>

<a href=""class="page-quick-sidebar-toggler">
    <i class="icon-login"></i>
</a>

<div class="quick-nav-overlay"></div>

<script src="/assets/metronic/global/plugins/respond.min.js"></script>
<script src="/assets/metronic/global/plugins/excanvas.min.js"></script>
<script src="/assets/metronic/global/plugins/ie8.fix.min.js"></script>
<script src="/assets/metronic/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/scripts/datatable.js" type="text/javascript"></script>
<script src="/assets/metronic/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="/assets/metronic/global/scripts/app.min.js" type="text/javascript"></script>
<script src="/assets/metronic/layouts/layout/scripts/layout.min.js" type="text/javascript"></script>
<script src="/assets/metronic/layouts/layout/scripts/demo.min.js" type="text/javascript"></script>
<script src="/assets/metronic/layouts/global/scripts/quick-sidebar.min.js" type="text/javascript"></script>
<script src="/assets/metronic/layouts/global/scripts/quick-nav.min.js" type="text/javascript"></script>
<!-- App -->
<script src="/assets/app/app.js" type="text/javascript"></script>
<script src="/assets/app/datetime.js" type="text/javascript"></script>


<script type="text/javascript">
    var _dataTable;
    var _delSelected;
    $(function () {
        var _columns = [
            {
                "data":function (row, type, val, meta) {
                    return '<input type="checkbox" name="box" id="box" class="icheckbox_minimal-grey" value="'+row.id+'"/>'
                }
            },
            {"data": "id"},
            {
                "data": "goodsName",
                render: function(data, type, row, meta) {
                    var html;
                    html = '<div style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:150px;" title=' + data + '>' + data + '</div>';
                    return html;
                }
            },
            {
                "data": "category.categoryName",
                render: function(data, type, row, meta) {
                    var html;
                    html = '<div style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:80px;" title=' + data + '>' + data + '</div>';
                    return html;
                }
            },
            {"data": "price"},
            {"data": "originalPrice"},
            {
                "data": "goodsDetail",
                render: function(data, type, row, meta) {
                    var html;
                    html = '<div style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:150px;" title=' + data + '>' + data + '</div>';
                    return html;
                }
            },
            {"data": "goodsNumber"},
            {
                "data": function (row,type,val,meta) {
                    if (row.picture1 == null){
                        return '';
                    }
                    return '<a href="'+row.picture1+'" target="_blank">查看</a>';
                }
            },
            {
                "data": function (row,type,val,meta) {
                    if (row.picture2 == null){
                        return '';
                    }
                    return '<a href="'+row.picture2+'" target="_blank">查看</a>';
                }
            },
            {
                "data": function (row,type,val,meta) {
                    if (row.picture3 == null){
                        return '';
                    }
                    return '<a href="'+row.picture3+'" target="_blank">查看</a>';
                }
            },
            {
                "data": function (row,type,val,meta) {
                    if (row.picture4 == null){
                        return '';
                    }
                    return '<a href="'+row.picture4+'" target="_blank">查看</a>';
                }
            },
            {
                "data": function (row,type,val,meta) {
                    if (row.picture5 == null){
                        return '';
                    }
                    return '<a href="'+row.picture5+'" target="_blank">查看</a>';
                }
            },
            {
                "data": function (row,type,val,meta) {
                    return DateTime.format(row.created,"yyyy-MM-dd");
                },
                render: function(data, type, row, meta) {
                    var html;
                    html = '<div style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:100px;" title=' + data + '>' + data + '</div>';
                    return html;
                }
            },
            {
                "data": function (row,type,val,meta) {
                    return DateTime.format(row.updated,"yyyy-MM-dd HH:mm");
                },
                render: function(data, type, row, meta) {
                    var html;
                    html = '<div style="text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:150px;" title=' + data + '>' + data + '</div>';
                    return html;
                }
            },
            {
                "data": function (row, type, val, meta) {
                    if (row.jbStatus == null){
                        return '<input style="width: 86px" class="btn green-dark" value="都不是" onclick="reversal('+row.id+')"/>'
                    }
                    if (row.jbStatus == 1){
                        return '<input style="width: 86px" class="btn green-dark" value="精选" id="selected" onclick="reversalS('+row.id+')"/>'
                    }
                    if (row.jbStatus == 2){
                        return '<input style="width: 86px" class="btn green-dark" value="白菜" id="cheapest" onclick="reversalC('+row.id+')"/>'
                    }
                },
            }
        ];
        _dataTable = MyShopApp.initDataTables("/admin/goods/page",_columns);
    });

    function reversal(goodsId) {
        var _selected = 1;
        alert("是否设置为白菜");
        $.ajax({
            url : '/admin/goods/toCheapest',
            type : 'post',
            data :{
                "selected" : _selected,
                "goodsId" : goodsId
            },
            success:function (data) {
                console.log(data);
                window.location.reload();
            }
        })
    }

    function reversalS(goodsId) {
        var _selected = 1;
        alert("是否设置为白菜");
        $.ajax({
            url : '/admin/goods/toCheapest',
            type : 'post',
            data :{
                "selected" : _selected,
                "goodsId" : goodsId
            },
            success:function (data) {
                console.log(data);
                window.location.reload();
            }
        })
    }

    function reversalC(goodsId) {
        var _cheapest = 2;
        alert("是否设置为精选");
        $.ajax({
            url : '/admin/goods/toCheapest',
            type : 'post',
            data :{
                "selected" : _cheapest,
                "goodsId" : goodsId
            },
            success:function (data) {
                console.log(data);
                window.location.reload();
            }
        })
    }

    function delSelected() {
        _delSelected = MyShopApp.initDelSelected("/admin/goods/delSelected?ids=");
    }
</script>
</body>

</html>
